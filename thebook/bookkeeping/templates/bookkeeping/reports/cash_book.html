{% extends "base/main.html" %}

{% load currency i18n %}

{% block content %}

<div class="card shadow mb-4">
  <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
    <h4 class="m-0 font-weight-bold text-primary">{% translate "Cash Book" %} ({{ start_date|date:"SHORT_DATE_FORMAT" }} - {{ end_date|date:"SHORT_DATE_FORMAT" }})</h4>
    <h5 class="m-0 font-weight-bold">
      <form method="get" action="{% url 'bookkeeping:report-cash-book' %}">
        {% csrf_token %}
        <label for="start_date">{% translate "Start Date" %}</label>
        <input type="date" id="start_date" name="start_date" value="{{ start_date|date:'Y-m-d' }}">

        <label for="end_date">{% translate "End Date" %}</label>
        <input type="date" id="end_date" name="end_date" value="{{ end_date|date:'Y-m-d' }}">
        <button type="submit" class="btn-circle"><i class="fa fa-search" title='{% translate "Search"'></i></button>
      </form>
    </h5>
  </div>
  <div class="card-body">
    <small>
      <a href="{% querystring start_date=None end_date=None csrfmiddlewaretoken=None %}">
        {% translate "Current Month" %}
      </a>
    </small>
    <hr/>
    <div class="table-responsive">
      <table class="table table-sm table-bordered" id="transactions" width="100%" cellspacing="0">
        <thead>
          <tr>
            <th>{% translate "Date" %}</th>
            <th>{% translate "Description" %}</th>
            <th>{% translate "Category" %}</th>
            <th>{% translate "Bank Account" %}</th>
            <th>{% translate "Income" %}</th>
            <th>{% translate "Expense" %}</th>
            <th>{% translate "Balance" %}</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{ cash_book.start_date }}</td>
            <td>Opening Balance</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td><strong>{{ opening_balance|money }}</strong></td>
          </tr>
          {% for transaction in transactions %}
          <tr>
            <td>{{ transaction.date|date:"SHORT_DATE_FORMAT" }}</td>
            <td>{{ transaction.description }}</td>
            <td>{{ transaction.category|default_if_none:"-" }}</td>
            <td>{{ transaction.bank_account|default_if_none:"-" }}</td>
            <td>{{ transaction.income|money }}</td>
            <td>{{ transaction.expense|money }}</td>
            <td>{{ transaction.balance|money }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="card-body">

</div>
{% endblock content %}
